#!/bin/bash -eu
files=$(find "${HOME}/.elm/0.19.0/package" -type f -name docs.json)
jq -r 'inputs
  |map({filename: input_filename, name: .name, content: .})
  |path(..|.name?) as $p
  |{ name: getpath($p),
     module: getpath($p[:2]).name?,
     sig: getpath($p[:-1]).type,
     path: $p[:-1]
   }
  |select(.sig?)|.module + "." + .name + "\t" + .sig' $files|fzf
