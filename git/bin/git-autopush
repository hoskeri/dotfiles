#!/bin/sh -eu

if [ "true" != "$(git config autopush.enabled)" ]
then
  >&2 echo "E: autopush not enabled for this repository."
  exit 1
fi

cd "$(git root)"
git add -A .
git commit --quiet -am "autocommit" >/dev/null
git pull --rebase --quiet
git push origin master --quiet
>&2 echo "I: auto push completed."
