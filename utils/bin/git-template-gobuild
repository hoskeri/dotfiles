#!/bin/bash
set -eu

PROJECT_NAME=$1
PROJECT_ORG="hoskeri.net"

test -d .git

DESTDIR=$(pwd)

cat <<END > ${DESTDIR}/.gitignore
.*sw*
*.o
*.a
pkg
bin
vendor
END

mkdir -p ${DESTDIR}/src/${PROJECT_ORG}/${PROJECT_NAME}/vendor

cat <<END > ${DESTDIR}/src/${PROJECT_ORG}/${PROJECT_NAME}/vendor/packages.txt
github.com/jmoiron/sqlx
github.com/labstack/echo/.../
github.com/Sirupsen/logrus
github.com/mattn/go-sqlite3
END

cat <<END > ${DESTDIR}/.envrc
export GOPATH=\$(pwd)
END

cat <<END > ${DESTDIR}/src/${PROJECT_ORG}/${PROJECT_NAME}/server.go
package main

import "fmt"

func main() {
  fmt.Println("hello, world")
}
END
