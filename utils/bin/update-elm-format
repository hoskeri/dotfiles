#!/bin/bash
set -eu
workdir=$HOME/.update-elm-format-cache/
mkdir -p $workdir
elm_format_releases=https://api.github.com/repos/avh4/elm-format/releases
elm_latest_release_filter='.[0].assets[]|.browser_download_url|select(endswith("linux-x64.tgz"))|select(contains("elm-format-0.18"))'
elm_format_url=$(curl -s $elm_format_releases|jq -r "$elm_latest_release_filter")
echo $elm_format_url
wget -q $elm_format_url -c -O $workdir/elm-format.tar.gz
tar -C ~/bin/ -zxf $workdir/elm-format.tar.gz
